#!/bin/bash --login
#
#PBS -N loops2
#PBS -l select=1:ncpus=36
#PBS -l walltime=0:30:0
#PBS -A d167-s1770309

cd $PBS_O_WORKDIR
 
module load intel-compilers-17
module load gcc

BIN_DIR=.
DATA_FOLDER=./data
DATA_FILE=$DATA_FOLDER/results_backend.tsv
rm $DATA_FILE

echo "Threads Number	Schedule	Loop	Time" >> $DATA_FILE;

for THREADS in 1 2 4 6 8 12 16
do
  export OMP_NUM_THREADS=$THREADS;
  $BIN_DIR/loops2 >> $DATA_FILE;
done
